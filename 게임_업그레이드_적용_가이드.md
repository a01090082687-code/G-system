# 게임 업그레이드 적용 가이드

## ✅ 추가된 기능

### 1. 게임 설명창 개선 ✅
- 시작 전 모달에 명확한 게임 방법 설명 추가
- "좋은 아이템을 먹고 나쁜 아이템을 피하세요!" 메시지 추가
- 조작법 및 규칙 상세 설명

### 2. 점진적 난이도 상승 ✅
- **50점마다** 난이도 레벨 증가
- 난이도 증가 시:
  - 아이템 떨어지는 속도 증가 (최소 800ms까지)
  - 나쁜 아이템 비율 증가 (최대 70%까지)
  - 아이템 생성 간격 감소 (최소 500ms까지)

### 3. Top 10 랭킹보드 ✅
- 게임 오버 시 랭킹 표시
- 이름 입력 및 랭킹 등록 기능
- Google Apps Script를 백엔드로 사용
- Google Sheets에 랭킹 데이터 저장

---

## 📋 적용 방법

### 1단계: Code.gs 업데이트

1. Google Sheets 열기
2. **확장 프로그램** → **Apps Script** 클릭
3. `Code.gs` 파일 열기
4. **전체 코드 선택** (Ctrl+A) → **삭제**
5. 로컬 `Code.gs` 파일 내용을 **복사** → **붙여넣기**
6. **저장** (Ctrl+S)

### 2단계: Google Apps Script 재배포

1. **배포** → **배포 관리** 클릭
2. 기존 배포 옆의 **수정** 버튼 클릭
3. **새 버전으로 배포** 선택
4. **설정 확인**:
   - 실행할 함수: `doGet`
   - 액세스 권한이 있는 사용자: **"모든 사용자"** ⚠️ 필수!
5. **배포** 버튼 클릭

### 3단계: health-catch-game.html 업데이트

1. 로컬 `health-catch-game.html` 파일 확인
2. GitHub에 푸시:
   ```bash
   git add health-catch-game.html Code.gs
   git commit -m "Add game ranking system and difficulty progression"
   git push
   ```

### 4단계: GAS_URL 확인

`health-catch-game.html` 파일의 `GAS_URL`이 올바른지 확인:
```javascript
const GAS_URL = 'https://script.google.com/macros/s/YOUR_URL/exec';
```

배포 후 나온 URL과 일치하는지 확인하세요.

---

## 🎮 게임 기능 설명

### 난이도 시스템

| 점수 | 난이도 레벨 | 속도 | 나쁜 아이템 비율 | 생성 간격 |
|------|------------|------|----------------|----------|
| 0-49 | 0 | 보통 (2000ms) | 40% | 2000ms |
| 50-99 | 1 | 빠름 (1800ms) | 45% | 1800ms |
| 100-149 | 2 | 더 빠름 (1600ms) | 50% | 1600ms |
| 150-199 | 3 | 매우 빠름 (1400ms) | 55% | 1400ms |
| 200+ | 4+ | 최고 속도 (800ms) | 최대 70% | 500ms |

### 랭킹 시스템

- **저장 위치**: Google Sheets의 `GameRankings` 시트
- **데이터 형식**: 이름, 점수, 날짜
- **표시**: Top 10만 표시
- **정렬**: 점수 내림차순

---

## 🔧 Code.gs 추가 함수

### `getRankings()`
- 랭킹 데이터 조회
- Top 10 반환
- 점수 내림차순 정렬

### `saveRanking(ss, name, score)`
- 새 랭킹 저장
- Top 10만 유지 (나머지 자동 삭제)
- 이름 최대 10자 제한

---

## 📝 Google Sheets 시트 구조

### GameRankings 시트

| name | score | date |
|------|-------|------|
| 홍길동 | 250 | 2026-02-13T... |
| 김철수 | 180 | 2026-02-13T... |
| ... | ... | ... |

**자동 생성**: 게임에서 랭킹을 저장하면 자동으로 시트가 생성됩니다.

---

## ✅ 테스트 체크리스트

- [ ] Code.gs 업데이트 완료
- [ ] Google Apps Script 재배포 완료 ("모든 사용자" 권한)
- [ ] health-catch-game.html 업데이트 완료
- [ ] GAS_URL이 올바르게 설정됨
- [ ] 게임 시작 시 설명창 표시 확인
- [ ] 50점, 100점, 150점마다 난이도 증가 확인
- [ ] 게임 오버 시 랭킹 표시 확인
- [ ] 이름 입력 및 랭킹 등록 기능 확인
- [ ] Google Sheets에 랭킹 데이터 저장 확인

---

## 🐛 문제 해결

### 랭킹이 표시되지 않는 경우
1. Google Apps Script가 재배포되었는지 확인
2. "모든 사용자" 권한이 설정되었는지 확인
3. 브라우저 콘솔에서 오류 확인
4. GAS_URL이 올바른지 확인

### 랭킹 등록이 안 되는 경우
1. 이름이 입력되었는지 확인 (최대 10자)
2. 점수가 0보다 큰지 확인
3. Google Sheets의 GameRankings 시트 확인
4. 브라우저 콘솔에서 오류 확인

---

**이제 게임이 완전히 업그레이드되었습니다!** 🎉
